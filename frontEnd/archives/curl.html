<!DOCTYPE html>
        <html>
            <head>
                <meta charset="utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
                <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
                <title>curl</title>
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
                <link rel="stylesheet" href="../lib/highlight-github.css">
                <link rel="stylesheet" href="../lib/markdown.css">
                <style>
                    #toc_container {
                        position: fixed;
                        top: 10px;
                        width: 250px;
                        right: 10px;
                        word-break: break-word;
                    }
                </style>
            </head>
            <body class="ui main text container">
                <a href="/post">返回文章首页</a>
                <a href="https://maicss.com//Users/mac/Documents/code/js/blog2/frontEnd/archives/curl.html#disqus_thread">count</a>
                <h1 id="curl-笔记">CURL 笔记</h1><div><i class="tags icon"></i><div class="ui horizontal label">HTTP</div> <div class="ui horizontal label">curl</div></div>
<div> <i class="calendar icon"></i>2017-04-03 13:04</div><p>curl在日常使用中，我主要用在两个地方：一是下载文件，这个还包括了之后的安装脚本之类的；另外一个就是测试网络。</p>
<p>感觉用起来不错，但是原来看的都是零零碎碎的，这次总结一下。</p>
<div id="toc_container"><p>文章目录</p><ul class="ui list"><li class="item"><a href="#下载文件">下载文件</a></li><li class="item"><a href="#网络测试">网络测试</a></li><li class="item"><a href="#和wget的区别">和wget的区别</a><ul><li class="item"><a href="#相同点">相同点</a></li><li class="item"><a href="#wget">wget</a></li><li class="item"><a href="#curl">curl</a></li></ul></li><li class="item"><a href="#总结">总结</a></li></ul></div><h2 id="下载文件">下载文件</h2><div class="ui message"><pre><code class="lang-"><span class="hljs-meta">#</span><span class="bash"> 指定文件名</span>
curl -o filename someURL 
<span class="hljs-meta">#</span><span class="bash"> 使用默认的文件名</span>
curl -O someURL
<span class="hljs-meta">#</span><span class="bash"> 断点续传</span>
curl -C -o someURL
</code></pre></div><h2 id="网络测试">网络测试</h2><div class="ui message"><pre><code class="lang-"><span class="hljs-meta"># 直接访问(也即获得这个页面的源码)</span>
curl someURL
<span class="hljs-meta"># 只显示头部信息</span>
<span class="hljs-meta"># 其实这个就是-X HEAD方法，但是这个更安全一些，因为有的服务器不支持HEAD方法</span>
curl -I someURL
<span class="hljs-meta"># 显示头部信息和页面源码</span>
curl -i someURL
<span class="hljs-meta"># 显示连接信息</span>
curl -v someURL
<span class="hljs-meta"># 显示连接详细信息</span>
curl --trace someURL
<span class="hljs-meta"># 重定向</span>
curl -L someURL

<span class="hljs-meta"># get访问和get提交表单直接使用即可，默认就是get</span>
<span class="hljs-meta"># 指定HTTP方法</span>
curl -X POST/PUT someURL
<span class="hljs-meta"># POST有参数的时候，可以直接加上参数，就默认使用的是POST</span>
curl -d/--data <span class="hljs-string">'a=1&amp;b=2'</span> -d @file someURL
<span class="hljs-meta"># encode 参数</span>
curl --data-urlencode <span class="hljs-string">"名称=小明"</span> someURL
<span class="hljs-meta"># 表单提交</span>
curl -F/-form name1=value1 -form name2=value2 someURL
<span class="hljs-meta"># referer</span>
curl --referer url someURL
<span class="hljs-meta"># user agent</span>
curl -A/--user-agent <span class="hljs-string">"Mozilla/5.0 xxxx"</span> someURL
<span class="hljs-meta"># 访问时加上cookie</span>
curl --cookie <span class="hljs-string">"name=aaa"</span> someURL
<span class="hljs-meta"># 保存服务器返回的cookie</span>
curl -c cookieFile someURL
<span class="hljs-meta"># 从文件中读取cookie然后访问</span>
curl -b cookieFile someURL
<span class="hljs-meta"># 添加访问header</span>
curl -H/--header <span class="hljs-string">"Content-Type: application/json"</span> someURL
<span class="hljs-meta"># HTTP认证</span>
curl -u name:password someURL
<span class="hljs-meta"># 访问时带上HTTP证书</span>
curl --cert mycert:mypassword --cert-type PEM --key mykey --key-type PEM someURL
<span class="hljs-meta">#访问时忽略证书</span>
curl -k someURL
<span class="hljs-meta">#添加代理</span>
curl -x/--proxy proxyURL someURL
</code></pre></div><h2 id="和wget的区别">和wget的区别</h2><blockquote>
<p>这些是curl的作者说的，算是相当有权威性。我英语很烂的，一边有道一边翻译的，估计翻译的很差劲，有啥问题直接在下面评论即可，也可以给我发邮件。</p>
</blockquote>
<h3 id="相同点">相同点</h3><ul>
<li>都是CLI工具，都能从FTP, HTTP和HTTPS下载东西</li>
<li>都支持HTTP POST请求</li>
<li>都支持HTTP cookies</li>
<li>都是非UI应用，能像使用脚本一样使用</li>
<li>都是开源免费的软件</li>
<li>都是90年代开始的项目</li>
<li>都支持<a href="http://www.metalinker.org/">metalink</a>（一种记录了BT服务器地址和所需镜像的XML文件）<h3 id="wget">wget</h3></li>
<li>Wget只能使用命令行，没有相关的库。</li>
<li>能递归下载！这是和curl一个很大的区别（用这个能爬站）。</li>
<li>较为年长。开始于1995年，而curl开始于1996（逗逼作者）。</li>
<li>证书为GPL。wget完全遵循GPL V3标准，而curl是MIT。</li>
<li>是一个GNU软件。Wget是GNU工程的一部分，FSF拥有所有权，而curl项目是完全独立的，不丛属任何机构或者组织，所有权归Daniel所有。</li>
<li>下载东西的时候，Wget不需要使用任何参数，而curl要使用-o或者-O才可以（逗逼）。</li>
<li>在TSL上，Wget只支持GnuTLS和OpenSSL。</li>
<li>在代理认证上，Wget只支持Basic auth。</li>
<li>Wget不支持SOCKS。</li>
<li>支持断点续传。curl没有这点（但是最近添加了还是怎么了，上面的-C就是断点续传的）。</li>
<li>Wget默认开启了很多属性，如cookies, redirect-following, time stamping from the remote resource等等，在cur里这些都需要手动开启。</li>
<li><p>wget命令能只用一个左手就全部键入（逗逼，而且二指禅的我还做不到这点）！</p>
<h3 id="curl">curl</h3></li>
<li><p>是一个库。curl构建于libcurl，这是一个跨平台有稳定的API的库。这是因为创作这个软件的出发点就不一样。所以这个工具不只是一个命令行工具，所以使用起来也有一丁点的麻烦。</p>
</li>
<li>pipes。curl能像unix的cat命令那样显示，直接向stdout输出，从stdout读取数据。是&quot;everything is a pipe&quot;理念的践行者。wget更像是cp命令的行为。</li>
<li>Single shot（这个咋翻译(╯°□°）╯︵ ┻━┻）。 curl就是用来做最基本的数据传输，（译注：不会事先为你想好要做什么，可定制的程度比较大，上手难度也就比较大）只传输用户指定的数据，不会递归的下载资源，不会带有任何用户没有指定的逻辑。</li>
<li>支持更多协议。curl支持FTP, FTPS, Gopher, HTTP, HTTPS, SCP, SFTP, TFTP, TELNET, DICT, LDAP, LDAPS, FILE, POP3, IMAP, SMB/CIFS, SMTP, RTMP and RTSP。而Wget只支持HTTP, HTTPS and FTP.</li>
<li>支持更多平台。curl的出发点就是跨平台，所以支持的平台比wget要多，比如：OS/400, TPF和其他更不常见的unix平台。</li>
<li>对SSL的支持更加完善。curl可以使用11种不同的SSL库进行构建（11！作者就是这样写的，意思就是让子弹飞的9种方法搞死他，9种！！），而且支持更多对协议细节的定制。</li>
<li>HTTP认证。支持更多的认证方式，特别是HTTP proxy。如: Basic, Digest, NTLM and Negotiate。</li>
<li>SOCKS。支持更多的socks协议。</li>
<li>双向性。curl提供了上传和发送的能力，而wget只提供了简单的HTTP POST支持</li>
<li>HTTP multipart/form-data。这个是模仿浏览器向服务器上传东西用的。</li>
<li>curl支持gzip压缩，Content-Encoding，自动压缩数据。</li>
<li>curl offers and performs decompression of Transfer-Encoded HTTP, wget doesn&#39;t</li>
<li>curl支持HTTP/2。这是个双全工而且效率很高的协议（作者使用的是Happy Eyeballs这个词，好诡异）。</li>
<li>支持更多的开发者定制。而且这个是可以讨论的。我给出了三个（更新的）渠道：（支持）邮件列表，经常提交，经常释放新版本。任何关注这两个项目的人，都能看得出来，curl的项目更加与时俱进，而且这已经持续了10多年，你可以从openhub（的代码）上看得出来。</li>
</ul>
<h2 id="总结">总结</h2><p>从上面看来，日常使用wget已经够了，毕竟家里只要有一个双头中号的螺丝刀就能满足大部分需求了，谁也不会都买一个完整的造价近200块的一个工具箱。简单，方便，满足大部分需求就已经很不错了。</p>
<p>curl入门稍高一点点，但是学会了就更加得心应手，更能满足处女座定制的需求。</p>
<p>至于我，我肯定选curl啊，为啥？因为有逼格啊。</p>
<p>而且：</p>

                <p><a href="../MD/curl.md">查看本文Markdown版本</a></p>
                <div id="disqus_thread"></div>
                <script>
                
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                
                var disqus_config = function () {
                this.page.url = 'https://maicss.com//Users/mac/Documents/code/js/blog2/frontEnd/archives/curl.html';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = 'curl'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = '//https-www-maicss-com.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <script id="dsq-count-scr" src="//https-www-maicss-com.disqus.com/count.js" async></script>
                <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-70116787-3', 'auto');
                ga('send', 'pageview');

                </script>
            </body>
        </html>